<div *ngIf="errorMessage"><span>{{this.errorMessage}}</span></div>

<div id="policylist" class="container"><br>
    <div class="panel panel-info">
        <div class="panel-heading">
            <h3 class="panel-title">Policy</h3>
        </div>



        <div class="panel-body">
            <form #regForm="ngForm" (ngSubmit)="submit(regForm)" ngNativeValidate>


                <!-- One "tab" for each step in the form: -->

                <div id="tab1" class="tab">
                    <h3>Vehicle Details:</h3>

                    <table class="table" border="0">
                        <tr>
                            <td colspan="4">Fields marked with <span>*</span> are mandatory</td>
                        </tr>
                        <tr>
                            <td><label for="Make">Make </label> <span> *</span></td>
                            <td>
                                <p><select id="Make" name="Make" (change)="makeChange($event)" required class="custom-select"
                                        style="width:200px;">
                                        <option value="">Make</option>
                                        <option *ngFor="let m of makeList" [ngValue]="m">{{ m }}</option>
                                    </select></p>
                            </td>
                            <td><label for="Model">Model </label> <span> *</span></td>
                            <td>
                                <p><select id="Model" name="Model" (change)="modelChange($event)" required class="custom-select"
                                        style="width:200px;">
                                        <option value="">Model</option>
                                        <option *ngFor="let mo of modelList" [ngValue]="mo">{{ mo }}</option>
                                    </select></p>
                            </td>
                        </tr>
                        <tr>
                            <td><label>Sub-Model </label> <span> *</span></td>
                            <td>
                                <p><select id="SubModel" name="SubModel" (change)="submodelChange($event)" required
                                        class="custom-select" style="width:200px;">
                                        <option value="">Submodel</option>
                                        <option *ngFor="let submo of submodelList" [ngValue]="submo">{{ submo }}</option>
                                    </select></p>
                            </td>

                            <td><label>CC </label> <span> *</span></td>
                            <td>
                                <p><input type="number" id="cc" name="cc" [(ngModel)]="this.cc" required></p>
                            </td>
                        </tr>
                        <tr>
                            <td><label>Fuel Type </label> <span> *</span></td>
                            <td>
                                <p><select id="fuelType" name="fuelType" [(ngModel)]="fuelType" (change)="fuelTypeChange($event)"
                                        required class="custom-select" style="width:200px;">
                                        <option value="">Fuel Type</option>
                                        <option value="PETROL">Petrol</option>
                                        <option value="DIESEL">Diesel</option>
                                        <option value="CNG">CNG</option>
                                    </select></p>
                            </td>

                            <td><label>Vehicle Registration No. </label><span> *</span></td>
                            <td>
                                <p><input type="text" id="vehicleRegNo" name="vehicleRegNo" pattern="[a-zA-Z0-9-]+"
                                        [(ngModel)]="vehicleRegNo" required #vehicleRegNoControl="ngModel"></p>
                                <div *ngIf="vehicleRegNoControl?.touched && vehicleRegNoControl.errors?.pattern" class="alert alert-danger">
                                    <div>Please enter valid Vehicle Reg no</div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><label>Engine No. </label><span> *</span></td>
                            <td>
                                <p><input type="text" id="engineNo" name="engineNo" pattern="[a-zA-Z0-9]+" [(ngModel)]="engineNo"
                                        required #engineNoControl="ngModel"></p>
                                <div *ngIf="engineNoControl?.touched && engineNoControl.errors?.pattern" class="alert alert-danger">
                                    <div>Please enter valid Engine No.</div>
                                </div>
                            </td>
                            <td><label>Chasis No.</label> <span> *</span></td>
                            <td>
                                <p><input type="text" id="chasisNo" name="chasisNo" pattern="[a-zA-Z0-9]+" [(ngModel)]="chasisNo"
                                        required #chasisNoControl="ngModel"></p>
                                <div *ngIf="chasisNoControl?.touched && chasisNoControl.errors?.pattern" class="alert alert-danger">
                                    <div>Please enter valid Chasis No.</div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><label>Manufacturing Year</label> <span> *</span></td>
                            <td>
                                <!-- <p><input type="text" id="manufacturingYear" name="manufacturingYear" [(ngModel)]="manufacturingYear"
                                        required></p> -->
                                <p><select id="manufacturingYear" name="manufacturingYear" 
                                        required class="custom-select" style="width:200px;" [(ngModel)]="manufacturingYear">
                                        <option value="">Year</option>
                                        <option *ngFor="let regYear of registrationYearList" [ngValue]="regYear">{{
                                            regYear }}</option>
                                    </select></p>
                            </td>

                            <td><label>Registration Date </label> <span> *</span></td>
                            <td>
                                <p><input type="date" id="registrationDate" name="registrationDate" [(ngModel)]="registrationDate"
                                        required></p>

                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label>Vehicle Registration City </label><span> *</span></td>
                            <td>
                                <p><input type="text" id="vehicleRegCity" name="vehicleRegCity" [(ngModel)]="vehicleRegCity"
                                        required></p>
                            </td>

                            <td></td>
                            <td></td>

                        </tr>
                    </table>
                </div>

                <!-- One "tab" for each step in the form: -->

                <div id="tab2" class="tab">
                    <h3>Polciy Quote</h3>

                    <p><b>Rs. {{price | number:'1.2-2' }}</b></p><br><br>
                    * Premium includes GST

                </div>

                <!-- One "tab" for each step in the form: -->

                <div id="tab3" class="tab">
                    <h3>Payment Details:</h3>
                    <table>
                        <tr>
                            <td colspan="4">Fields marked with <span>*</span> are mandatory</td>
                        </tr>
                        <tr>
                            <td><label>Name on Card </label> <span> *</span></td>
                            <td>
                                <p><input type="text" id="nameOnCard" name="nameOnCard" pattern="[a-zA-Z0-9 ]+"
                                    [(ngModel)]="nameOnCard" #nameOnCardControl="ngModel" required></p>
                                        <div *ngIf="nameOnCardControl?.touched && nameOnCardControl.errors?.pattern" class="alert alert-danger">
                                                <div>Please enter valid Name</div>
                                            </div>        
                            </td>
                        </tr>
                        <tr>
                            <td><label>Card Number </label><span> *</span></td>
                            <td>
                                <p><input type="text" id="cardNo" name="cardNo" [(ngModel)]="cardNo" 
                                    required #cardNoControl="ngModel" pattern="[0-9]+"></p>
                                <div *ngIf="cardNoControl?.touched && cardNoControl.errors?.pattern" class="alert alert-danger">
                                        <div>Please enter valid Card Number</div>
                                    </div>   
                            </td>
                        </tr>
                        <tr>
                            <td><label>Card Expiry</label> <span> *</span></td>
                            <td>
                                <p><select id="cardExpiryMonth" name="cardExpiryMonth" [(ngModel)]="cardExpiryMonth"
                                        required>
                                        <option value="" selected=true>Select Month</option>
                                        <option value="01">Jan</option>
                                        <option value="02">Feb</option>
                                        <option value="03">Mar</option>
                                        <option value="04">Apr</option>
                                        <option value="05">May</option>
                                        <option value="06">Jun</option>
                                        <option value="07">Jul</option>
                                        <option value="08">Aug</option>
                                        <option value="09">Sep</option>
                                        <option value="10">Oct</option>
                                        <option value="11">Nov</option>
                                        <option value="12">Dec</option>
                                    </select>

                                    <select id="cardExpiryMonth" name="cardExpiryYear" [(ngModel)]="cardExpiryYear"
                                        required>
                                        <option value="" selected="true">Select Year</option>
                                        <option value="2019">2019</option>
                                        <option value="2020">2020</option>
                                        <option value="2021">2021</option>
                                        <option value="2022">2022</option>
                                        <option value="2023">2023</option>
                                        <option value="2024">2024</option>
                                        <option value="2025">2025</option>
                                    </select>
                                </p>
                            </td>
                        </tr>
                        <tr>
                            <td><label>CVV </label><span> *</span></td>
                            <td>
                                <p><input type="text" id="cvv" name="cvv" [(ngModel)]="cvv" 
                                    #cvvControl="ngModel" pattern="[0-9]+" required></p>
                                <div *ngIf="cvvControl?.touched && cardNoControl.errors?.pattern" class="alert alert-danger">
                                        <div>Please enter valid CVV Number</div>
                                    </div> 
                            </td>
                        </tr>
                    </table>
                </div>
                <div id="tab4" style="overflow:auto;">
                    <div style="float:right;">
                        <button type="button" id="prevBtn" (click)="handleClick($event,-1)">Previous</button>
                        <button type="button" id="nextBtn" (click)="handleClick($event,1)">Next</button>
                    </div>
                </div>
                <div id="tab5" style="overflow:auto;">
                    <div style="float:right;">
                        <button type="button" id="prevBtn" (click)="handleClick($event,-1)">Previous</button>
                        <button type="submit" id="submit">Submit</button>
                    </div>
                </div>
                <!-- Circles which indicates the steps of the form: -->
                <div style="text-align:center;margin-top:40px;">
                    <span class="step"></span>
                    <span class="step"></span>
                    <span class="step"></span>
                </div>
            </form>
        </div>
    </div>
</div>